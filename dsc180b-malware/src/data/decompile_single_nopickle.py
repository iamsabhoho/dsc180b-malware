from androguard import misc
from stellargraph import StellarGraph
import sys, os
import numpy as np
import sys

from datetime import datetime



def decompile_apk(filepath):
    '''
    decompiles an apk and returns a, d, dx

    filepath --> path to the APK file
    session_n --> session filename, extension is '.ag'

    function returns a list with items: [a, d, dx]
    a: APK object
    d: array of DalvikVMFormat
    dx: Analysis object
    '''

    a, d, dx = misc.AnalyzeAPK(filepath)
    return [a, dx]


if __name__ == "__main__":
    user_input = r"C:\Users\USER\Documents\GitHub\dsc180b-localtesting\data\Pinterest.apk"
    print(decompile_apk(user_input))
